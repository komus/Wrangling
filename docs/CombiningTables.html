<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Komolafe Oyindolapo" />


<title>CombiningTables</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<div class="container-fluid main-container">

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->





<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Data Wrangling</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="CombiningTables.html">
    <span class="fa fa-newspaper-o"></span>
     
    Combining Tables
  </a>
</li>
<li>
  <a href="webscraping.html">
    <span class="fa fa-web"></span>
     
    Web Scraping
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">CombiningTables</h1>
<h4 class="author"><em>Komolafe Oyindolapo</em></h4>
<h4 class="date"><em>2019 M08 12</em></h4>

</div>


<strong>Question 1:</strong> You have created data frames tab1 and tab2 of state population and election data, similar to our module videos:
<pre><code>> tab1
state            population
Alabama             4779736
Alaska               710231
Arizona             6392017
Delaware             897934
District of Columbia 601723

> tab2
state  electoral_votes
Alabama      9
Alaska       3
Arizona     11
California  55
Colorado     9
Connecticut  7

> dim(tab1)
[1] 5 2

> dim(tab2)
[1] 6 2 </code></pre>
<p>What are the dimensions of the table dat, created by the following command?</p>
<pre><code>dat <- left_join(tab1, tab2, by = “state”)</pre>
<p></code></p>
<p><strong>Answer:</strong><code> 5 rows by 3 columns correct </code></p>
<p><strong>Question 2:</strong> We are still using the <code> tab1 </code> and <code> tab2 </code> tables shown in question 1. What join command would create a new table “dat” with three rows and two columns?</p>
<p>
<strong>Answer:</strong> <code>dat &lt;- semi_join(tab1, tab2, by = “state”) </code>
</p>
<strong>Question 3</strong> Which of the following are real differences between the join and bind functions? <strong>Answer:</strong>
<pre><code>
- Binding functions combine by position, while join functions match by variables.
- Joining functions can join datasets of different dimensions, but the bind functions must match on the appropriate dimension (either same row or column numbers).
- Bind functions can combine both vectors and dataframes, while join functions work for only for dataframes.
</code></pre>
<strong>Question 4</strong> We have two simple tables, shown below:
<pre><code>
> df1
 x     y    
 a     a    
 b     a    

> df2
 x     y    
 a     a    
 a     b  </code></pre>
Which command would result in the following table?
<pre><code>
> final
 x     y    
 b     a   
</code></pre>
<p><strong>Answer:</strong> <code>final &lt;- setdiff(df1, df2)</code></p>
<p><strong>Question 5</strong> Use the correct join or bind function to create a combined table of the names and statistics of the top 10 home run (HR) hitters for 2016. This table should have the player ID, first name, last name, and number of HR for the top 10 players. Name this data frame top_names.</p>
Identify the join or bind that fills the blank in this code to create the correct table:
<pre><code>
top_names <- top %>% ___________________ %>%
    select(playerID, nameFirst, nameLast, HR)
</code></pre>
<p><strong>Answer:</strong> <code>left_join(Master) </code></p>
<p><strong>Question 6</strong> Inspect the Salaries data frame. Filter this data frame to the 2016 salaries, then use the correct bind join function to add a salary column to the top_names data frame from the previous question. Name the new data frame top_salary. Use this code framework:</p>
<pre><code>
top_salary <- Salaries %>% filter(yearID == 2016) %>%
  ______________ %>%
  select(nameFirst, nameLast, teamID, HR, salary)
  </code></pre>
<p><strong>Answer:</strong> <code>right_join(top_names) </code></p>
<p><strong>Question 7</strong> Inspect the AwardsPlayers table. Filter awards to include only the year 2016.</p>
<p>How many players out of the top 10 home run hitters won at least one award in 2016?</p>
<pre class="r"><code>library(Lahman)
library(tidyverse)

top &lt;- Batting %&gt;% 
  filter(yearID == 2016) %&gt;%
  arrange(desc(HR)) %&gt;%    # arrange by descending HR count
  slice(1:10)  %&gt;% inner_join(AwardsPlayers) %&gt;% group_by(playerID) %&gt;% tally() %&gt;% select(playerID)

top %&gt;% as_tibble()</code></pre>
<pre><code>## # A tibble: 3 x 1
##   playerID 
##   &lt;chr&gt;    
## 1 arenano01
## 2 bryankr01
## 3 trumbma01</code></pre>
<pre class="r"><code>awards &lt;- AwardsPlayers %&gt;% filter(yearID == 2016) %&gt;% group_by(playerID) %&gt;% tally() %&gt;% select(playerID)
awards %&gt;% as_tibble()</code></pre>
<pre><code>## # A tibble: 47 x 1
##    playerID 
##    &lt;chr&gt;    
##  1 altuvjo01
##  2 arenano01
##  3 arrieja01
##  4 baezja01 
##  5 beltrad01
##  6 bettsmo01
##  7 blackch02
##  8 bogaexa01
##  9 bradlja02
## 10 brittza01
## # ... with 37 more rows</code></pre>
<pre class="r"><code>setdiff(awards, top)</code></pre>
<pre><code>## # A tibble: 44 x 1
##    playerID 
##    &lt;chr&gt;    
##  1 altuvjo01
##  2 arrieja01
##  3 baezja01 
##  4 beltrad01
##  5 bettsmo01
##  6 blackch02
##  7 bogaexa01
##  8 bradlja02
##  9 brittza01
## 10 cabremi01
## # ... with 34 more rows</code></pre>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
